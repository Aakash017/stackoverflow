{% extends 'base.html'%}
{% block content %}
<br>
<div class="container-fluid">
    <div class="depname">
        <div class="question_title">
            <h2>
                {{ question.title }}
            </h2>
        </div>
        <div class="question_body">
            <h4>
                {{ question.body }}
            </h4>
        </div>
        <div class="question_author">
            By: {{ question.author }}
            on {{ question.created_at|date:"j F, Y" }}
        </div>
        <div class="logo_box">
            <form method="POST" action="/question_detail/{{question.id}}/upvote_question/">
                {% csrf_token %}
                <p>{{upvote}}</p>
                <button type="submit"> Click here</button>
            </form>
        </div>
    </div>
</div>


<script>
    function call_comment_api(user_id)
    {
        var user_id = user_id;
        if(!user_id)
        {
            alert("login required");
            location.href('/login')
        }
    }




</script>
<br>

<div class="container-fluid">
    <div>
        <form method="POST" action="/articles/question_detail/{{question.id}}/post_comment/">
            {% csrf_token %}
            <!-- {{ comment_form.as_p }} -->
            <b>Comment:</b> <br>
            <textarea name="comment" required id="comment" placeholder="Comment for the content"></textarea><br>
            <input type="submit" name="post_comment" onclick="call_comment_api('{{request.session.user_id}}');"
                   value="POST">

        </form>

    </div>

    <br>


    <br>
    <div class="comment_list">
        {% for comment in comments %}

        <div>
            <hr>
            {% if comment.comment|wordcount <= 30 %}
            <h4>{{ comment.comment }}</h4>
            {% else %}
            <h4>{{ comment.comment|truncatewords:30 }}</h4>
            {% endif %}
        </div>
        <div>By: {{ comment.author.email }}
            on {{ comment.created_at|date:"j F, Y" }}
        </div>
        <div class="logo_box">
            <form method="POST" action="/question_detail/{{question.id}}/upvote_comment/{{comment.id}}/">
                {% csrf_token %}
                <p>{{comment.upvote}}</p>
                <button type="submit"> Click here</button>
            </form>
        </div>
        {% endfor %}
    </div>
</div>


{% endblock content %}


